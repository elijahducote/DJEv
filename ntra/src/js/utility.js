(()=>{var B=Object.defineProperty;var l=(e,t)=>B(e,"name",{value:t,configurable:!0});var u=Object.getPrototypeOf,_,x,g,h,I={isConnected:1},F=1e3,w,L={},J=u(I),N=u(u),f,$=l((e,t,r,n)=>(e??(setTimeout(r,n),new Set)).add(t),"addAndScheduleOnFirst"),E=l((e,t,r)=>{let n=g;g=t;try{return e(r)}catch(s){return console.error(s),r}finally{g=n}},"runAndCaptureDeps"),y=l(e=>e.filter(t=>t._dom?.isConnected),"keepConnected"),M=l(e=>w=$(w,e,()=>{for(let t of w)t._bindings=y(t._bindings),t._listeners=y(t._listeners);w=f},F),"addStatesToGc"),S={get val(){return g?._getters?.add(this),this.rawVal},get oldVal(){return g?._getters?.add(this),this._oldVal},set val(e){g?._setters?.add(this),e!==this.rawVal&&(this.rawVal=e,this._bindings.length+this._listeners.length?(x?.add(this),_=$(_,this,K)):this._oldVal=e)}},j=l(e=>({__proto__:S,rawVal:e,_oldVal:e,_bindings:[],_listeners:[]}),"state"),m=l((e,t)=>{let r={_getters:new Set,_setters:new Set},n={f:e},s=h;h=[];let o=E(e,r,t);o=(o??document).nodeType?o:new Text(o);for(let a of r._getters)r._setters.has(a)||(M(a),a._bindings.push(n));for(let a of h)a._dom=o;return h=s,n._dom=o},"bind"),V=l((e,t=j(),r)=>{let n={_getters:new Set,_setters:new Set},s={f:e,s:t};s._dom=r??h?.push(s)??I,t.val=E(e,n,t.rawVal);for(let o of n._getters)n._setters.has(o)||(M(o),o._listeners.push(s));return t},"derive"),G=l((e,...t)=>{for(let r of t.flat(1/0)){let n=u(r??0),s=n===S?m(()=>r.val):n===N?m(r):r;s!=f&&e.append(s)}return e},"add"),R=l((e,t,...r)=>{let[{is:n,...s},...o]=u(r[0]??0)===J?r:[{},...r],a=e?document.createElementNS(e,t,{is:n}):document.createElement(t,{is:n});for(let[d,i]of Object.entries(s)){let c=l(p=>p?Object.getOwnPropertyDescriptor(p,d)??c(u(p)):f,"getPropDescriptor"),v=t+","+d,D=L[v]??=c(u(a))?.set??0,O=d.startsWith("on")?(p,q)=>{let A=d.slice(2);a.removeEventListener(A,q),a.addEventListener(A,p)}:D?D.bind(a):a.setAttribute.bind(a,d),b=u(i??0);d.startsWith("on")||b===N&&(i=V(i),b=S),b===S?m(()=>(O(i.val,i._oldVal),a)):O(i)}return G(a,o)},"tag"),T=l(e=>({get:l((t,r)=>R.bind(f,e,r),"get")}),"handler"),U=l((e,t)=>t?t!==e&&e.replaceWith(t):e.remove(),"update"),K=l(()=>{let e=0,t=[..._].filter(n=>n.rawVal!==n._oldVal);do{x=new Set;for(let n of new Set(t.flatMap(s=>s._listeners=y(s._listeners))))V(n.f,n.s,n._dom),n._dom=f}while(++e<100&&(t=[...x]).length);let r=[..._].filter(n=>n.rawVal!==n._oldVal);_=f;for(let n of new Set(r.flatMap(s=>s._bindings=y(s._bindings))))U(n._dom,m(n.f,n._dom)),n._dom=f;for(let n of r)n._oldVal=n.rawVal},"updateDoms"),W={tags:new Proxy(e=>new Proxy(R,T(e)),T()),hydrate:l((e,t)=>U(e,m(t,e)),"hydrate"),add:G,state:j,derive:V};var k,P;function te(e,t){let r;return function(){let n=this,s=arguments;clearTimeout(r),r=setTimeout(()=>e.apply(n,s),t)}}l(te,"Dbounce");function re(e,t){let r=0;return function(){if(Date.now()-r>t)return r=Date.now(),e.apply(this,arguments)}}l(re,"throttle");function ne(e,t,r){let n=[];if(r&&(n[0]=r),t||(t="span"),Array.isArray(e)){let s=e.length,o=s;for(;s;--s)n.push(e[o-s])}else n.push(e);return W.tags[t].apply(null,n)}l(ne,"htm");function se(e){return new Promise(t=>setTimeout(t,e))}l(se,"sleep");async function z(e){let{paymentIntent:{status:t}}=await e.retrievePaymentIntent(P);return console.log(t),t}l(z,"refreshStatus");async function H(e,t){let r=document.getElementById("payment-message");if(P&&(e.status=await z(t)),console.log(e.status),e.error)r.textContent=`Something is amiss: ${JSON.stringify(e.error)}!`;else if(e.status==="requires_action"){let{error:n,paymentIntent:{client_secret:s,status:o,id:a}}=await t.handleNextAction({clientSecret:e.client_secret});if(n)r.textContent=`Something is amiss: ${n.message}!`;else{if(P=s,o==="requires_action")return r.textContent="Payment cancelled prematurely!",H(e,t);r.textContent="Payment successful!!",window.location.href=`/go/message?id=${a}`}}else e.status==="succeeded"&&(r.textContent="Payment successful!",window.location.href=`/go/message?id=${id}`)}l(H,"handleServerResponse");function C(e){return e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}l(C,"formatNumber");function Q(e){e||(e=.5);let t=2.9,r=.3,n=(e+r)/(1-t/100);return Math.round(n*100)/100}l(Q,"calculateGrossAmount");function le(e,t){if(e.value!==""){var r=e.value,n=parseFloat(r.substring(4)),s=Q(n);if(t==="blur")if(k!==n)r="US$ "+s.toString(),k=s;else return;var o=r.length,a=e.selectionStart;if(r.indexOf(".")>=0){var d=r.indexOf("."),i=r.substring(0,d),c=r.substring(d);i=C(i),c=C(c),t==="blur"&&(c+="00"),c=c.substring(0,2),r="US$ "+i+"."+c}else r=C(r),r="US$ "+r,t==="blur"&&r.length===4?r+="0.50":t==="blur"&&(r+=".00");e.value=r;var v=r.length;a=v-o+a,e.setSelectionRange(a,a)}}l(le,"formatCurrency");})();
